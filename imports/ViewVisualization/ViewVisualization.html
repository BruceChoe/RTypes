<template name="viewVisualization">
  {{> headerBar }}
  <div class="container-fluid"  style="height:100%">
    <div class="row"  style="height:100%">
      {{> sidebar }}

      {{#if canView visualizationId}}
        {{#if loggedIn}}
          <div class="col-9">
            <div class="row">
              <div class="col">
                <h1>{{ getData visualizationId "name" }}</h1>
                <h3>Author: {{ getData visualizationId "createdBy" }}</h3>
                <p>{{ getData visualizationId "description" }}</p>
                <hr>
                <div class="form-group">
                  {{> downloadVisualization visualizationId}}
                  <hr>
                  {{> shareVisualization visualizationId}}
                </div>
              </div>

              <div class="col" id="imagePane">
                {{#each img in getData visualizationId "images" }}
                  {{> visualizationImageBox img=img }}
                {{/each}}
              </div>
            </div>
          </div>
        {{else}}
          <div class="col-md-9">
            <br><br>
            <h4>You must be logged in to view your visualizations.</h4>
          </div>
        {{/if}}
      {{else}}
        <div class="col-md-9">
          <br><br>
          <h4>You are not allowed to view this visualization.</h4>
        </div>
      {{/if}}
    </div>
  </div>
</template>

<template name="visualizationImageBox">
  <img src="{{ img }}" class="img-fluid">
</template>

<template name="shareVisualization">
  <label>Share this visualization:</label>
  <input type="email" id="emailField" placeholder="Email address" class="form-control mt-1">
  <button id="shareButton" class="btn btn-primary form-control mt-3">Share</button>
  <div id="emailFeedback"></div>
</template>