<template name="viewVisualization">
  {{> headerBar }}
  <div class="container-fluid"  style="height:100%">
    <div class="row"  style="height:100%">
      {{> sidebar }}

      {{#if canView visualizationId}}
        {{#if loggedIn}}
          <div class="col-9">
            <div class="row">
              <h1 class="col">{{ getData visualizationId "name" }}</h1>
              <div class="w-100"></div>
              <h2 class="col">Author: {{ getData visualizationId "createdBy" }}</h2>
              <div class="w-100"></div>
              <p class="col">{{ getData visualizationId "description" }}</p>
              <div class="w-100"></div>
              {{> downloadVisualization visualizationId}}
              <div class="w-100"></div>
              {{> shareVisualization visualizationId}}
              <div class="w-100"></div>

              <div class="col" id="imagePane">
                {{#each img in getData visualizationId "images" }}
                  {{> visualizationImageBox img=img }}
                {{/each}}
              </div>
            </div>
          </div>
        {{else}}
          <div class="col-md-9">
            <br><br>
            <h4>You must be logged in to view your visualizations.</h4>
          </div>
        {{/if}}
      {{else}}
        <div class="col-md-9">
          <br><br>
          <h4>You are not allowed to view this visualization.</h4>
        </div>
      {{/if}}
    </div>
  </div>
</template>

<template name="visualizationImageBox">
  <img src="{{ img }}" class="img-fluid">
</template>

<template name="shareVisualization">
  <input type="email" id="emailField" placeholder="Share with someone..." class="col-md-2 mr-2 mt-2">
  <button id="shareButton" class="btn btn-primary">Share</button>
  <div id="emailFeedback"></div>
</template>